-- Script Anti-Lag Ultra Inteligente + Redução de Efeitos + Notificações

local workspace = game:GetService("Workspace")
local StarterGui = game:GetService("StarterGui")

-- CONFIGURAÇÃO DE REDUÇÃO
-- Escolha: "leve", "medio", "pesado"
local modoReducao = "medio"

-- Porcentagens baseadas na escolha
local reducoes = {
    ["leve"] = 0.7,
    ["medio"] = 0.5,
    ["pesado"] = 0.3
}

local reducaoEscolhida = reducoes[modoReducao] or 0.5 -- padrão médio se escrever errado

-- MATERIAIS E NOMES DE PEDRAS
local materiaisPedra = {
    Enum.Material.Concrete,
    Enum.Material.Slate,
    Enum.Material.Basalt,
    Enum.Material.Rock,
    Enum.Material.Cobblestone,
    Enum.Material.Pebble
}

local nomesProvaveis = {
    "Rock", "Boulder", "Debris", "Stone", "GroundBreak", "ShatteredRock", "Chunk", "Rubble"
}

-- Função para saber se foi criado recentemente
local function criadoRecentemente(obj)
    return tick() - obj:GetDebugId() < 10
end

-- Função para detectar pedra de combate
local function ehPedraDeCombate(obj)
    if not obj:IsA("BasePart") then return false end

    for _, nome in ipairs(nomesProvaveis) do
        if obj.Name:lower():find(nome:lower()) then
            return true
        end
    end

    for _, material in ipairs(materiaisPedra) do
        if obj.Material == material then
            return true
        end
    end

    local size = obj.Size
    if (size.X > 1 and size.Y > 1 and size.Z > 1) and criadoRecentemente(obj) then
        return true
    end

    return false
end

-- Função para reduzir efeitos
local function reduzirEfeitos(obj)
    if obj:IsA("ParticleEmitter") then
        obj.Rate = obj.Rate * reducaoEscolhida
        obj.Size = NumberSequence.new({
            NumberSequenceKeypoint.new(0, obj.Size.Keypoints[1].Value * reducaoEscolhida),
            NumberSequenceKeypoint.new(1, obj.Size.Keypoints[#obj.Size.Keypoints].Value * reducaoEscolhida)
        })
        obj.Transparency = NumberSequence.new(0.7)
        obj.LightEmission = 0
    elseif obj:IsA("Beam") or obj:IsA("Trail") then
        obj.Transparency = NumberSequence.new(0.7)
        obj.LightEmission = 0
        if obj.Width0 then obj.Width0 = obj.Width0 * reducaoEscolhida end
        if obj.Width1 then obj.Width1 = obj.Width1 * reducaoEscolhida end
    elseif obj:IsA("Smoke") or obj:IsA("Fire") then
        obj.Opacity = 0.3
        obj.Size = obj.Size * reducaoEscolhida
    end
end

-- Função geral para tratar objetos
local function tratarObjeto(obj)
    if ehPedraDeCombate(obj) then
        obj:Destroy()
    else
        reduzirEfeitos(obj)
    end
end

-- Monitorar novos objetos
workspace.DescendantAdded:Connect(function(obj)
    task.defer(tratarObjeto, obj)
end)

-- Tratar objetos existentes
for _, obj in ipairs(workspace:GetDescendants()) do
    tratarObjeto(obj)
end

-- NOTIFICAÇÕES
StarterGui:SetCore("SendNotification", {
    Title = "AntiLag",
    Text = "Anti-Lag Ativado!",
    Duration = 3
})

StarterGui:SetCore("SendNotification", {
    Title = "Redução de Efeitos",
    Text = "Modo escolhido: " .. modoReducao,
    Duration = 3
})
